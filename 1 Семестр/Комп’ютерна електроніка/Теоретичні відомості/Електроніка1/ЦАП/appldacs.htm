
<h2 align="center"><font color="#000080">Применение ЦАП</font></h2>
 
 
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;Схемы применения цифро-аналоговых преобразователей относятся не только к области преобразования код - аналог. Пользуясь их свойствами можно определять произведения двух или более сигналов, строить делители функций, аналоговые звенья, управляемые от микроконтроллеров, такие как аттенюаторы, интеграторы. Важной областью применения ЦАП являются также генераторы сигналов, в том числе сигналов произвольной формы. Ниже рассмотрены некоторые схемы обработки сигналов, включающие ЦА-преобразователи.</p>
<a name="1"></a>
<h3 align="center">Обработка чисел, имеющих знак</h3>
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;До сих пор при описании цифро-аналоговых преобразователей входная цифровая информация представлялась в виде чисел натурального ряда (униполярных). Обработка целых чисел (биполярных) имеет определенные особенности. Обычно двоичные целые числа представляются с использованием дополнительного кода. Таким путем с помощью восьми разрядов можно представить числа в диапазоне от -128 до +127. При вводе чисел в ЦАП этот диапазон чисел сдвигают до 0...255 путем прибавления 128. Числа, большие 128, при этом считаются положительными, а числа, меньшие 128, - отрицательными. Среднее число 128 соответствует нулю. Такое представление чисел со знаком, называется смещенным кодом. Прибавление числа, составляющего половину полной шкалы данной разрядности (в нашем примере это 128), можно легко выполнить путем инверсии старшего (знакового) разряда. Соответствие рассмотренных кодов иллюстрируется табл. 1.<br> 
 
<h4 align="left">Таблица 1</h3>
 
<table BORDER="1" CELLSPACING="2" CELLPADDING="0" WIDTH="650" align="center">
  <tr align="center">
    <td>Десятичный</td>
    <td>Дополнительный</td>
    <td>Смещенный</td>
    <td>Аналог I/I<sub>макс</sub></td>
  </tr>
  <tr>
    <td><table align="center" cellspacing="2" cellpadding="2" border="0">
<tr>
    <td>127</td>
</tr>
<tr>
    <td>1</td>
</tr>
<tr>
    <td>0</td>
</tr>
<tr>
    <td>- 1</td>
</tr>
<tr>
    <td>- 127</td>
</tr>
<tr>
    <td>- 128</td>
</tr>
</table>
</td>
    <td><table align="center" cellspacing="2" cellpadding="2" border="0">
<tr>
    <td>01111111</td>
</tr>
<tr>
    <td>00000001</td>
</tr>
<tr>
    <td>00000000</td>
</tr>
<tr>
    <td>11111111</td>
</tr>
<tr>
    <td>10000001</td>
</tr>
<tr>
    <td>10000000</td>
</tr>
</table>
</td>
    <td><table align="center" cellspacing="2" cellpadding="2" border="0">
<tr>
    <td>11111111</td>
</tr>
<tr>
    <td>10000001</td>
</tr>
<tr>
    <td>10000000</td>
</tr>
<tr>
    <td>01111111</td>
</tr>
<tr>
    <td>00000001</td>
</tr>
<tr>
    <td>00000000</td>
</tr>
</table>
</td>
    <td><table align="center" cellspacing="2" cellpadding="2" border="0">
<tr>
    <td>127/255</td>
</tr>
<tr>
    <td>1/255</td>
</tr>
<tr>
    <td>0</td>
</tr>
<tr>
    <td>-1/255</td>
</tr>
<tr>
    <td>-127/255</td>
</tr>
<tr>
    <td>-128/255</td>
</tr>
</table>
</td>
  </tr>
</table>
 
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;Чтобы получить выходной сигнал с правильным знаком, необходимо осуществить обратный сдвиг путем вычитания тока или напряжения, составляющего половину шкалы преобразователя. Для различных типов ЦАП это можно сделать разными способами. Например, у ЦАП на источниках тока, диапазон изменения опорного напряжения ограничен, причем выходное напряжение имеет полярность обратную полярности опорного напряжения. В этом случае биполярный режим наиболее просто реализуется включением дополнительного резистора смещения R<sub>см</sub> между выходом ЦАП и входом опорного напряжения (рис. 18а). Резистор R<sub>см</sub> изготавливается на кристалле ИМС. Его сопротивление выбрано таким, чтобы ток I<sub>см</sub> составлял половину максимального значения выходного тока ЦАП.</p>
 
<p ALIGN="center"><img src="images/components/dac/Acim818.gif" width=582 height=404 alt="" border="0">
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;В принципе, аналогично можно решить задачу смещения выходного тока и для ЦАП на МОП-ключах. Для этого нужно проинвертировать опорное напряжение, а затем сформировать из -Uоп ток смещения, который следует вычесть из выходного тока ЦАП. Однако для сохранения температурной стабильности лучше обеспечить формирование тока смещения непосредственно в ЦАП. Для этого в схему на рис. 8а вводят второй операционный усилитель и второй выход ЦАП подключают ко входу этого ОУ (рис. 18б).<br>
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;Второй выходной ток ЦАП, согласно (10),<br>
 
<table border="0" width="100%">
  <tr>
    <td width="88%" align="center"><img src="images/components/dac/form821.gif" width=323 height=45 alt="" border="0"></td>
    <td width="12%" align="center">(21)</td>
  </tr>
</table>
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;На входе ОУ1 ток I'<sub>вых</sub> суммируется с током I<sub>мр</sub>, соответствующим единице младшего разряда входного кода. Суммарный ток инвертируется. Ток, протекающий через резистор обратной связи R<sub>ос</sub> ОУ2, составляет</p>
 
<table border="0" width="100%">
  <tr>
    <td width="88%" align="center"><img src="images/components/dac/form822.gif" width=315 height=49 alt="" border="0"></td>
    <td width="12%" align="center">(22)</td>
  </tr>
</table>
 
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;или, с учетом (8)</p>
 
<table border="0" width="100%">
  <tr>
    <td width="88%" align="center"><img src="images/components/dac/form823.gif" width=208 height=49 alt="" border="0"></td>
    <td width="12%" align="center">(23)</td>
  </tr>
</table>
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;При</p>
 
<table border="0" width="100%">
  <tr>
    <td width="88%" align="center"><img src="images/components/dac/form824.gif" width=166 height=49 alt="" border="0"></td>
    <td width="12%" align="center">(24)</td>
  </tr>
</table>
 
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;а при </p>
 
<table border="0" width="100%">
  <tr>
    <td width="88%" align="center"><img src="images/components/dac/form825.gif" width=254 height=54 alt="" border="0"></td>
    <td width="12%" align="center">(25)</td>
  </tr>
</table>
 
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;Это в случае N=8 с точностью до множителя 2 совпадает с данными табл. 6, с учетом того, что для преобразователя на МОП-ключах максимальный выходной ток</p>
 
<p ALIGN="center"><img src="images/components/dac/form825a.gif" width=162 height=54 border=0 alt="">
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;Если резисторы R2 хорошо согласованы по сопротивлению, то абсолютное изменение их величины при колебаниях температуры не влияет на выходное напряжение схемы.<br>
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;У цифро-аналоговых преобразователей с выходным сигналом в виде напряжения, построенных на инверсной резистивной матрице (см. рис. 9), можно более просто реализовать биполярный режим (рис. 18в). Как правило, такие ЦАП содержат на кристалле выходной буферный усилитель. Для работы ЦАП в униполярном включении свободный вывод нижнего по схеме резистора R не подключают, либо подключают к общей точке схемы для удвоения выходного напряжения. Для работы в биполярном включении свободный вывод этого резистора соединяют со входом опорного напряжения ЦАП. ОУ в этом случае работает в дифференциальном включении и его выходное напряжение с учетом (16)<br>
 
 
<table border="0" width="100%">
  <tr>
    <td width="88%" align="center"><img src="images/components/dac/form826.gif" width=306 height=54 alt="" border="0"></td>
    <td width="12%" align="center">(26)</td>
  </tr>
</table>
<a name="2"></a>
<h3 align="center">Перемножители и делители функций</h3>
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;Как уже указывалось выше, ЦА-преобразователи на МОП-ключах, допускают изменение опорного напряжения в широких пределах, в том числе и смену полярности. Из формул (8) и (17) следует, что выходное напряжение ЦАП пропорционально произведению опорного напряжения на входной цифровой код. Это обстоятельство позволяет непосредственно использовать такие ЦАП для перемножения аналогового сигнала на цифровой код.<br>
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;При униполярном включении ЦАП выходной сигнал пропорционален произведению двухполярного аналогового сигнала на однополярный цифровой код. Такой перемножитель называют двухквадрантным. При биполярном включении ЦАП (рис. 18б и 18в) выходной сигнал пропорционален произведению двухполярного аналогового сигнала на двухполярный цифровой код. Эта схема может работать как четырехквадрантный перемножитель.<br> 
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;Деление входного напряжения на цифровой масштаб M<sub>D</sub>=D/2<sup>N</sup> выполняется с помощью схемы двухквадрантного делителя (рис. 19).<br> 
 
 
<p ALIGN="CENTER"><img src="images/components/dac/Acim819.gif" width=608 height=278 alt="" border="0">
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;В схеме на рис. 19а преобразователь на МОП-ключах с токовым выходом работает как преобразователь "напряжение-ток", управляемый кодом D и включенный в цепь обратной связи ОУ. Входное напряжение подается на свободный вывод резистора обратной связи ЦАП, размещенного на кристалле ИМС. В этой схеме выходной ток ЦАП<br>
 
 
<p ALIGN="center"><img src="images/components/dac/form826a.gif" width=195 height=54 alt="" border="0">
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;что при выполнении условия R<sub>ос</sub>=R дает</p>
 
<p ALIGN="center"><img src="images/components/dac/form826b.gif" width=207 height=58 alt="" border="0">
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;Следует отметить, что при коде "все нули" обратная связь размыкается. Предотвратить этот режим можно, либо запретив такой код программно, либо включив между выходом и инвертирующим входом ОУ резистор с сопротивлением, равным R·2<sup>N+1</sup>.<br>
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;Схема делителя на основе ЦАП с выходом в виде напряжения, построенном на инверсной резистивной матрице и включающем буферный ОУ, приведена на рис. 8.19б. Выходное и входное напряжения этой схемы связаны уравнением<br>
 
 
<table border="0" width="100%">
  <tr>
    <td width="88%" align="center"><img src="images/components/dac/form827.gif" width=189 height=50 alt="" border="0"></td>
    <td width="12%" align="center">(27)</td>
  </tr>
</table>
 
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;Отсюда следует<br>
 
<p ALIGN="center"><img src="images/components/dac/form827a.gif" width=211 height=56 alt="" border="0">
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;В данной схеме усилитель охвачен как положительной, так и отрицательной обратными связями. Для преобладания отрицательной обратной связи (иначе ОУ превратится в компаратор) необходимо выполнение условия D&lt;2<sup>N-1</sup> или M<sub>D</sub>&lt;1/2. Это ограничивает значение входного кода нижней половиной шкалы.<br>
 
 <a name="3"></a>
<h3 align="center">Аттенюаторы и интеграторы на ЦАП</h3>
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;Аттенюаторы, т.е. регуляторы уровня сигнала, с цифровым управлением гораздо более надежны и долговечны, чем традиционные аттенюаторы на основе переменных резисторов. Их целесообразно использовать в измерительных приборах и других устройствах, требующих подстройки параметров, особенно автоматической. Такие аттенюаторы можно наиболее просто построить на основе перемножающего ЦАП с инверсной резистивной матрицей и буферным усилителем. В принципе для этой цели подойдет любой ЦАП указанного типа, но некоторыми фирмами выпускаются преобразователи, оптимизированные для выполнения указанной функции. На рис. 20а приведена схема аттенюатора на переменном резисторе, а на рис. 20б - аналогичная схема на перемножающем ЦАП.</p>
 
<p ALIGN="center"><img src="images/components/dac/Acim820.gif" width=522 height=238 alt="" border="0">
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;Если входной сигнал - однополярный, целесообразно использовать ЦАП с однополярным питанием, но буферный ОУ должен иметь выход "rail-to-rail", т.е. его выходное напряжение должно достигать нуля и напряжения питания. Если ЦАП - многоканальный, то у каждого преобразователя микросхемы должен быть индивидуальный вход опорного напряжения. Этим требованиям в разной степени удовлетворяют такие ИМС ЦАП, как 2-х канальный 12-разрядный МАХ532, 4-х канальный 8-разрядный МАХ509, 8-ми канальный 8-разрядный AD8441, 8-ми канальный 8-разрядный DAC-8841 и др.<br>
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;Для построения интегратора с цифровой установкой постоянной времени интегрирования можно использовать базовую схему интегратора, а в качестве входного резистора включить ЦАП с суммированием напряжений (рис. 12). На базе такой схемы можно построить фильтры, в том числе фильтры на основе метода переменных состояния, перестраиваемые генераторы импульсов и т.д.<br>
 
<a name="4"></a>
 <h3 align="center">Системы прямого цифрового синтеза сигналов</h3>
 
<p align="justify">&nbsp;&nbsp;&nbsp;&nbsp;Важной областью применения ЦАП является синтез аналоговых сигналов необходимой формы. Аналоговые генераторы сигналов - синусоидальной, треугольной и прямоугольной форм - имеют низкую точность и стабильность, не могут управляться от ЭВМ. В последние годы получили развитие системы прямого цифрового синтеза сигналов, обеспечивающие высокую точность задания частоты и начальной фазы сигналов, а также высокую верность воспроизведения их формы. Более того, эти системы позволяют генерировать сигналы большого многообразия форм, в том числе и форм, задаваемых пользователем. Упрощенная блок-схема генератора прямого цифрового синтеза сигналов приведена на рис. 21.<br>
 
<p ALIGN="center"><img src="images/components/dac/Acim821.gif" width=278 height=492 alt="" border="0">
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;В принципе, системы прямого цифрового синтеза просты. Более того, теория и основные способы построения таких систем известны уже около 30 лет. Правда, только недавно появились ЦАП и специализированные аналого-цифровые ИМС, подходящие для синтеза сигналов в широкой полосе частот.<br>
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;Схема прямого цифрового синтеза содержит три основных блока: генератор фазового угла, память и ЦАП. Генератор фазового угла в типичном случае представляет собой накапливающий сумматор с регистром. Работает он просто как регистр фазы, содержимое которого получает приращение на некоторый фазовый угол через заданные интервалы времени. Приращение фазы Dj загружается в виде цифрового кода во входные регистры. Память играет роль таблицы функций. Код текущей фазы поступает на ее адресные входы, а с выхода данных на вход ЦА-преобразователя поступает код, соответствующий текущему значению заданной функции. ЦАП в свою очередь формирует аналоговый сигнал.<br>
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;Регистр содержит текущую фазу выходного сигнала в виде целого числа, которое будучи поделено на 2N, где N -разрядность сумматора, равно доле периода. Увеличение разрядности регистра повышает только разрешающую способность этой доли. Частота выходного сигнала равна произведению частоты тактов f<sub>такт</sub> на приращение фазы в каждом периоде тактов. При использовании N-разрядного сумматора частота выходного сигнала будет равна<br>
 
 
<p ALIGN="center"><img src="images/components/dac/form827b.gif" width=160 height=54 alt="" border="0">
 
<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;Генераторы прямого синтеза выпускаются в виде ИМС. В частности, микросхема AD9850, упрощенная структура которой представлена на рис. 21, содержит 32-разрядный генератор фазового угла и 10-разрядный ЦАП. Загрузка приращения фазы осуществляется по 8-разрядной шине данных побайтово в четыре входных регистра. Память содержит таблицу синусов. Максимально допустимая тактовая частота составляет 125 МГц. При этом разрешение по частоте составляет 0,0291 Гц. Быстрый интерфейс позволяет менять частоту выходного сигнала до 23 миллионов раз в секунду.<br> 
